# Sonic 1 SCE - Dotgen Edition

This project is a collection of smaller projects built off of the [Sonic 1 in Sonic 3 & Knuckles](https://github.com/TheBlad768/Sonic-1-in-Sonic-3-S.C.E.-) disassembly, either one-and-dones or for other projects. 

## Additions from source
- Drop Dash, from Sonic Mania (the code for which was derived from Sonic 2 - Score Rush)
- Fast Air Moves, a feature that disables the vertical speed check that occurs during a jump, and before an air move
- Super Peel-Out, from Sonic CD (the code for which was derived from Sonic 2 - Score Rush, and from [heyjoeway's Sonic 2 Community's Cut](https://github.com/heyjoeway/s2cx)
- A Sprite bank system, enabling playable characters to have a theoretical maximum of tens of thousands of sprites

## Usage conditions
Original code contributions are free for reuse for the development of Sonic ROM Hacks, and, if applicable, non-commercial projects. Other original asset contributions, as well as unoriginal assets and code, may be subject to separate conditions. Per the terms of the [license](LICENSE), you may not use any of the contents of the repository for commercial purposes. Even if we could grant you permission to do so, due to the fact that this is a derivative of SEGA's Sonic the Hedgehog Mega Drive games, there is a 99.99999% likelihood you would've simply not been granted permission to use certain code and assets for commercial purposes anyway, on account of the fact that Dotgen Studios does not hold the power to grant you such permission in the first place. It is highly advised you triple check whether any line of code was written specifically for this project, or if it already existed, as there exists the chance you'll pull code directly originating from SEGA's Sonic the Hedgehog Mega Drive games.

## Sonic 1 SCE - Dotgen Edition - Credits

Each mini-project has its own set of credits:
### Drop Dash in Sonic 1 in Sonic 3
Implementation: giovanni.gen
Sprites source: Sample Sprite mod (Sonic 3 - Angel Island Revisited)
### Fast Air Moves
Implementation: giovanni.gen
### Super Peel-Out in Sonic 1 in Sonic 3
Implementation: giovanni.gen
Peel-Out fading sound effect: DeltaW
May contain code by heyjoeway
Original sprites sourced from Sonic 3 - Angel Island Revisited
### Sprite Bank System
Implementation: giovanni.gen

### Original Description

# SONIC-1-IN-SONIC-3-S.C.E.-

![Title](https://i.imgur.com/VbQoOjT.png)

![GitHub Release](https://img.shields.io/github/v/release/TheBlad768/Sonic-1-in-Sonic-3-S.C.E.-?style=flat-square)
![GitHub repo size](https://img.shields.io/github/repo-size/TheBlad768/Sonic-1-in-Sonic-3-S.C.E.-?style=flat-square)
![GitHub top language](https://img.shields.io/github/languages/top/TheBlad768/Sonic-1-in-Sonic-3-S.C.E.-?style=flat-square)
![GitHub Repo stars](https://img.shields.io/github/stars/TheBlad768/Sonic-1-in-Sonic-3-S.C.E.-?style=flat-square)
![GitHub watchers](https://img.shields.io/github/watchers/TheBlad768/Sonic-1-in-Sonic-3-S.C.E.-?style=flat-square)
![GitHub forks](https://img.shields.io/github/forks/TheBlad768/Sonic-1-in-Sonic-3-S.C.E.-?style=flat-square)
![GitHub commit activity](https://img.shields.io/github/commit-activity/w/TheBlad768/Sonic-1-in-Sonic-3-S.C.E.-?style=flat-square)
![GitHub Downloads (all assets, all releases)](https://img.shields.io/github/downloads/TheBlad768/Sonic-1-in-Sonic-3-S.C.E.-/total?style=flat-square)

# Download

- [Current version](https://github.com/TheBlad768/Sonic-1-in-Sonic-3-S.C.E.-/archive/refs/heads/flamedriver.zip)
- [Releases](https://github.com/TheBlad768/Sonic-1-in-Sonic-3-S.C.E.-/releases)
- [ROMs](https://github.com/TheBlad768/Sonic-1-in-Sonic-3-S.C.E.-/actions)

## Disclaimer

This is a port of Sonic The Hedgehog (1991) to [Sonic Clean Engine (S.C.E.) Extended version](https://github.com/TheBlad768/Sonic-Clean-Engine-S.C.E.-Extended-), our heavily modified and improved Sonic 3 & Knuckles engine, which we have been using for a long time for our MD projects (such as Hellfire Saga and Sonic 3 & Knuckles: Epilogue).

Please read the [license](LICENSE) before using this project.

## Screenshots

<details>
<summary>Show screenshots</summary>

<p align="center">
  <img src="https://i.imgur.com/EqCmjSK.png" style="max-width:100%;">
  <img src="https://i.imgur.com/rtzOHYb.png" style="max-width:100%;">
  <img src="https://i.imgur.com/6YTWpYb.png" style="max-width:100%;">
  <img src="https://i.imgur.com/MLsX9YQ.png" style="max-width:100%;">
  <img src="https://i.imgur.com/MlrJwEI.png" style="max-width:100%;">
  <img src="https://i.imgur.com/l0QAfCO.png" style="max-width:100%;">
  <img src="https://i.imgur.com/dRpyxOJ.png" style="max-width:100%;">
  <img src="https://i.imgur.com/Ta9my76.png" style="max-width:100%;">
  <img src="https://i.imgur.com/FtrAkRO.png" style="max-width:100%;">
  <img src="https://i.imgur.com/6bGlgfN.png" style="max-width:100%;">
  <img src="https://i.imgur.com/fn5ETM9.png" style="max-width:100%;">
  <img src="https://i.imgur.com/K0HpIgu.png" style="max-width:100%;">
  <img src="https://i.imgur.com/BD7Uuzq.png" style="max-width:100%;">
  <img src="https://i.imgur.com/haLN95q.png" style="max-width:100%;">
  <img src="https://i.imgur.com/JT05cue.png" style="max-width:100%;">
  <img src="https://i.imgur.com/X1m8pXp.png" style="max-width:100%;">
  <img src="https://i.imgur.com/V6AfKYw.png" style="max-width:100%;">
  <img src="https://i.imgur.com/D0Eapq5.png" style="max-width:100%;">
  <img src="https://i.imgur.com/QM5eUop.png" style="max-width:100%;">
  <img src="https://i.imgur.com/82Rdk6v.png" style="max-width:100%;">
  <img src="https://i.imgur.com/r6eKElG.png" style="max-width:100%;">
  <img src="https://i.imgur.com/rmrbD5b.png" style="max-width:100%;">
  <img src="https://i.imgur.com/g0tqv5L.png" style="max-width:100%;">
  <img src="https://i.imgur.com/Xp8CwYa.png" style="max-width:100%;">
  <img src="https://i.imgur.com/v39oNGQ.png" style="max-width:100%;">
</p>

</details>

## Features

- Cleaned up and optimized disassembly of Sonic 3 & Knuckles:

    - There are no hardcoded things as there were in the original Sonic 3 & Knuckles. Complete freedom in your work;

- Changed level layout format. Now there are two bytes for chunk IDs:

    - This will allow you to create more chunks for levels because there will be no one-byte limit here. This will allow you to port levels even from Sonic CD;

- All current level settings in one file:
    - No more searching through the entire Sonic disassembly to replace chunks, layout, palette, music, and other things. Just open [Pointer.asm](Levels/GHZ/Pointers) located in each level folder;

- Many original subroutines have been replaced with faster equivalents. These new subroutines do not break compatibility with the original Sonic 3 & Knuckles. Therefore, there is no need to worry about this:

    - Updated Ultra DMA Queue subroutines and compression algorithms(Kosinski Plus, Kosinski Plus Module, Updated Enigma) have optimized S3K's performance very well;

- I rewrote the code of all the screens, objects, and other things to get maximum performance:

    - Poorly written object code can significantly reduce game performance, regardless of whether other subroutines have been optimized very well. All code has been rewritten in S3K style. If you are familiar with Sonic 3 & Knuckles disassembly, you will have no problems with the S1S3/SCE code;

- The size of the object slots is now 0x50 bytes:
    - Additional free bytes will facilitate work on complex objects;

- Various sound drivers:
    - There are Z80 Sound Flamedriver and M68K Sonic 2 Clone Driver v2 (Mega PCM 2.0 version). It all depends on your tasks.

## Changes for the Sonic 1 in Sonic 3 & Knuckles (S.C.E. Version)

- New game engine. The original Sonic 1 has serious performance issues, so the game runs much better now;

- Some things are kept in the style of Sonic 3 & Knuckles. There is a mix of graphics and music from Sonic 1 and Sonic 3 & Knuckles;

- Playable Tails and Knuckles. You can play as Sonic and Tails or Knuckles and Tails. The villain switches between Eggman and Eggrobo depending on which character you choose to play;

- All level layouts have been updated to match Sonic 1 2013 and Sonic Origins. New paths for Tails and Knuckles in MZ3, SYZ2 and SLZ1, new secrets pretty much everywhere else;

- New artwork for bosses and other stuff;

- New settings menu;

- Seven Special Stages. Special Stages are now only available through Star Posts, but only if you have 50 rings. The player will lose 50 rings for entering the stage;

- You can get 7 Chaos Emeralds and use Super/Hyper Transformations;

- Many minor improvements in polish, such as added SFX or boss intros.

## Cheats and Secrets

- S1 Level Select: U, D, L, R, A+Start on the Title Screen;

- S.C.E. Level Select: U, D, L, R, A+C+Start on the Title Screen;

- Hidden Credits: Hold A+C on the Sega Screen;

- Debug Mode: 1, 9, 9, 1, 0, 6, 2, 3 in the Sound Test of any Level Select;

- All Emeralds: 4, 1, 2, 6 in the Sound Test of any Level Select;

- Results skip: A, B or C during Got Through/Special Stage screens.

## Additional links

#### If you are interested in the Sonic 1 in Sonic 3 & Knuckles (S.C.E. Version) with the Sonic 2 Clone Driver v2 (Mega PCM 2.0 version):

- [Sonic-1-in-Sonic-3-S.C.E.-Clone-Driver-v2-](https://github.com/TheBlad768/Sonic-1-in-Sonic-3-S.C.E.-/tree/Clone-Driver-v2)

#### Main repository:

- [Sonic-Clean-Engine-S.C.E.-](https://github.com/TheBlad768/Sonic-Clean-Engine-S.C.E.-)

#### Sonic Clean Engine (S.C.E.) Extended version:

- [Sonic-Clean-Engine-S.C.E.-Extended-](https://github.com/TheBlad768/Sonic-Clean-Engine-S.C.E.-Extended-)

## How to build the ROM

To build this, use build.bat if you're a Windows user, or build.sh if you're a Linux user. The built ROM will be called 'S1S3.gen'. Use build_debug for debug things. The built ROM will be called 'S1S3.debug.gen'.

## Quick start

- For editing sprites you can use [SonMapEd](https://info.sonicretro.org/SonMapEd), [ClownMapEd](https://info.sonicretro.org/ClownMapEd) or [Flex2](https://info.sonicretro.org/Flex_2) (Read the issues).

- For editing levels you can use official [SonLVL](https://info.sonicretro.org/SonLVL) or [SonLVL-64x64-Compatible](https://github.com/Project1114/SonLVL-64x64-Compatible). Unfortunately, [SonED2](https://info.sonicretro.org/SonED2) is no longer supported.

- To convert SMPS music to asm format you can use [smps2asm](https://forums.sonicretro.org/index.php?threads/smps2asm-and-improved-s-k-driver.26876).

- For counting instruction cycles you can use [68kCounter](https://68kcounter.grahambates.com).

- Recommended emulators for debugging: [BizHawk](https://github.com/TASEmulators/BizHawk/releases), [BlastEm](https://www.retrodev.com/blastem/nightlies/), [ClownMDEmu](https://github.com/Clownacy/clownmdemu-frontend/releases), [Exodus](https://www.exodusemulator.com/downloads/current-release), [Gens KMod](https://segaretro.org/Gens_KMod), [Regen](https://segaretro.org/Regen).

## Current issues

1. S.C.E. uses [Kosinski Plus algorithm](https://github.com/flamewing/mdcomp/blob/master/src/asm/KosinskiPlus.asm), but **Flex2** program does not support **Kosinski Plus Module**. Therefore, **Flex2.json** project file is partially useless. **SonMapEd** program does not support **Kosinski Plus** at all. You can only open uncompressed graphics.

### Solution: Use the fork from Nichloya:

- [Flex2](https://github.com/Nichloya/Flex2/releases)

#### Alternative programs:
- [mdcomp](https://github.com/flamewing/mdcomp/releases)
- [ClownMapEd](https://github.com/Clownacy/ClownMapEd/releases)
- [FW-KENSC-ShellExt](https://github.com/MainMemory/FW-KENSC-ShellExt/releases)

## FAQ

#### How do I add levels from previous Sonic games?

- If you want to convert levels from previous Sonic games, you have to use [LevelConverter](https://info.sonicretro.org/LevelConverter) from [SonLVL](https://info.sonicretro.org/SonLVL). Then change the layout format using [Layout converter](Utilities/Layout).

#### How do I make different text for Title Card?

- If you want to make a different text for Title Card, you need to create a file of letters from [List.unc](Objects/Main/Title%20Card/KosinskiPM%20Art/Levels). This will be loaded before the level starts.
You don't have to add the letters **'ENOZ' (ZONE)** because those letters are already in VRAM. Then you have to create a mapping of your zone name in [Map - Title Card.asm](Objects/Main/Title%20Card/Object%20Data).

Now you can use a Python script to create Title Card mappings [S3TCG](https://github.com/RobiTheGit/S3TCG).

#### Where can I find other SMPS music?

- If you want to use other SMPS music you can use [Valley Bell's SMPS Research](https://forums.sonicretro.org/index.php?threads/valley-bells-smps-research.32473) or [vgm2smps](https://github.com/Ivan-YO/vgm2smps/releases).

#### Why don't mappings use MapMacros?

- Unfortunately, not all programs support MapMacros, so I wanted to maintain compatibility with older programs. I don't want to just throw away **SonMapEd**. But there is support for MapMacros here, and you can use it if you want.

## Why Macro Assembler AS?

<details>
<summary>Answer</summary>
 
![AS]

[AS]: https://i.imgur.com/dYq4mPl.gif

</details>

## The Macro Assembler AS issues

#### Why does the ROM take so long to build?

- The speed of the ROM build process depends entirely on the power of your computer. A high-performance machine will build the ROM quickly, while a slower one will take significantly more time. If you're a Linux user and you're using Wine and Windows batch script, that will affect build speed too.

- Always specify jump sizes for instructions. Writing code without specifying jump sizes will significantly slow down the ROM build. The Macro Assembler AS will perform multiple passes until it can successfully build the ROM, which increases build time.

Example of problematic code:

```
		beq	sub_1234	; and any other branch instructions
		bsr	sub_1234
		bra	sub_1234
		jsr	sub_1234
		jmp	sub_1234
		lea	sub_1234,a1
		pea	sub_1234
```

Example of correct code:

```
		beq.s	sub_1234	; and any other branch instructions
		bsr.s	sub_1234
		bra.s	sub_1234
		jsr	(sub_1234).l
		jmp	(sub_1234).l
		lea	(sub_1234).l,a1
		pea	(sub_1234).l
```

#### Pay close attention to your code to avoid such issues.

### Here you can find more information about Macro Assembler AS and errors:

- [Flamewing's Enhanced AS](https://html-preview.github.io/?url=https://github.com/TheBlad768/Sonic-1-in-Sonic-3-S.C.E.-/blob/flamedriver/Tools/AS/asl.html)
- [Flamewing's Enhanced AS wiki](https://github.com/flamewing/asl-releases/wiki)
- [Sonic Retro](https://forums.sonicretro.org/index.php?threads/guide-to-common-as-assembler-errors.43731/)
- [SSRG](https://sonicresearch.org/community/index.php?threads/guide-to-common-as-assembler-errors.7201/)

> [!WARNING]\
> Please always specify the jump sizes for instructions. Macro Assembler AS may display random and misleading errors if the jump size is not specified. You will try to fix something that wasn’t actually broken, but these errors are caused only because you didn’t specify the jump size in the instruction.

### Macro Assembler AS Passes

I've added console messages about Macro AS passes.

![AS1](https://i.imgur.com/IpPy17k.png)

Try to keep 2 passes at all times. If you see 3, 4 or more passes, you should figure out what's causing the extra passes and try to fix it. This will save you a lot of time during the ROM build.

![AS2](https://i.imgur.com/skmKw5x.png)

## To-Do List

- [ ] Act transitions. Levels have been edited to allow for these, but unfortunately they couldn't be implemented in time for SHC
- [ ] Fix Knuckles' socks palette
- [ ] SRAM
- [ ] Fix and optimize all level chunks. At the moment it is difficult to create new layout because many chunks are available only in a certain act
- [X] Super/Hyper transformations
- [ ] Flamedriver has some [issues](https://github.com/flamewing/flamedriver/issues/25) that need to be addressed. Music speed-up is reset after 1UP. Continuous SFX have conflicts with other SFX. Continuous flag is not reset when playing normal SFX
- [ ] Tails' abilities (Flight cancel, Flight assist)
- [ ] Tails tail does not flicker during invulnerability after taking damage
- [ ] Change the art loading priority in PLC to avoid broken graphics during level appearance
- [ ] Knuckles' animation sometimes breaks when he climbs to the wall
- [ ] Rotating Junction does not shoot the character down

## Credits

### Red Miso Studios Staff

- TheBlad768 — Project lead, sole programmer, S.C.E. Game Engine
- Nichloya — Level art and level design edits, sprite art and other things
- pixelcat — Sprite art, UI art and other things
- FoxConED — S.C.E. Level Select font art
- Dolphman — Robotnik head art

### Testing and other help

- giovanni.gen, KGL, DeltaW, Narcologer, CatswellMeow, Nintorch, FoxConED, lavagaming1, cuberoot, Vladikcomper, ProjectFM, MarkeyJester, VAdaPEGA

### Special Support

- cuberoot

### Special Thanks

- joshyflip for consulting on the artwork
- Flamewing, devon, RealMalachi and others for bug fixing guides
- Clownacy for work on the disassemblies
- SSRG and Sonic Retro

## Links

- [YouTube channel](https://www.youtube.com/@TheBlad768)
- [Telegram channel](http://t.me/theblad768channel)
- [Red Miso Studios Discord](https://discords.com/servers/redmisostudios)

## These projects are based on the Sonic Clean Engine (S.C.E.)

<details>
<summary><b>Sonic Vania (2025 Demo)</b> by JvneTh</summary>
<p align="center">
  <a href="https://shc.zone/entries/contest2025/1212" target="_blank">SHC Page</a>
  <br><br>
  <img src="https://i.imgur.com/rLUkT3j.png" style="max-width:100%;">
</p>
</details>

<details>
<summary><b>Sonic 3 Rebuilt</b> by TomatoWave_0</summary>
<p align="center">
  <a href="https://shc.zone/entries/contest2025/1224" target="_blank">SHC Page</a>
  <br><br>
  <img src="https://i.imgur.com/GgXGebt.png" style="max-width:100%;">
</p>
</details>

<details>
<summary><b>Sonic The Hedgehog in Hellfire Saga (2023)</b></summary>
<p align="center">
  <a href="https://shc.zone/entries/contest2023/916" target="_blank">SHC Page</a> &nbsp;&nbsp;&nbsp;
  <a href="https://github.com/TheBlad768/Hellfire-Saga-Public-Source" target="_blank">Source</a>
  <br><br>
  <img src="https://i.imgur.com/GRyUeZD.png" style="max-width:100%;">
</p>
</details>

<details>
<summary><b>Sonic 3 & Knuckles: Epilogue (2021)</b></summary>
<p align="center">
  <a href="https://shc.zone/entries/contest2021/477" target="_blank">SHC Page</a> &nbsp;&nbsp;&nbsp;
  <a href="https://github.com/TheBlad768/Sonic-3-Knuckles-Epilogue-Public-Source" target="_blank">Source</a>
  <br><br>
  <img src="https://i.imgur.com/bawDZSn.png" style="max-width:100%;">
</p>
</details>

<details>
<summary><b>TishaProject (2019)</b></summary>
<p align="center">
  <a href="https://shc.zone/entries/contest2019/50" target="_blank">SHC Page</a>
  <br><br>
  <img src="https://i.imgur.com/fV2d77k.png" style="max-width:100%;">
</p>
</details>

<details>
<summary><b>Sonic Virtual Adventure (2017)</b> Cancelled</summary>
  <br>
  In the past I made the Sonic Clean Engine (S.C.E.) specifically for this project (:
  <br><br>
<p align="center">
  <img src="https://i.imgur.com/2S9MEIj.png" style="max-width:100%;">
</p>
</details>

#### Mini projects

<details>
<summary><b>Sonic With A Pogo Stick</b> by RobiWanKenobi</summary>
<p align="center">
  <a href="https://shc.zone/entries/contest2025/1358" target="_blank">SHC Page</a>
  <br><br>
  <img src="https://i.imgur.com/iJzZzI0.png" style="max-width:100%;">
</p>
</details>

<details>
<summary><b>Sunky MD</b> by RobiWanKenobi</summary>
<p align="center">
  <a href="https://shc.zone/entries/contest2025/1336" target="_blank">SHC Page</a>
  <br><br>
  <img src="https://i.imgur.com/M9CwAkX.png" style="max-width:100%;">
</p>
</details>

## Check out the Sonic Retro Disassemblies

- [s1disasm](https://github.com/sonicretro/s1disasm)
- [s2disasm](https://github.com/sonicretro/s2disasm)
- [skdisasm](https://github.com/sonicretro/skdisasm)
